import{$ as de,A as o,B as i,C as c,D as O,E as h,F as M,G as R,H as j,I as $,J as a,K as u,L as D,O as U,P as q,Q as ce,S as pe,T as A,U as le,V as me,Z as ue,a as x,b as Z,c as _,ca as Q,d as ee,da as fe,e as te,f as b,g as ne,h as N,i as ie,j as oe,k as p,l as F,m as L,n as k,o as re,p as ae,q as V,r as s,s as f,t as g,u as l,v as se,w as E,x as P,y as B,z as I}from"./chunk-VQU4PAI4.js";var m=class n{constructor(t){this.httpClient=t;this.cacheStore=this.fetchCacheFromLocalStorage()||{byCapital:{term:"",countries:[]},byCountries:{term:"",countries:[]},byRegion:{countries:[]}}}apiUrl="https://restcountries.com/v3.1";cacheStore;fetchCacheFromLocalStorage(){let t=localStorage.getItem("countriesCacheStore");if(t)return JSON.parse(t)}saveCacheToLocalStorage(){localStorage.setItem("countriesCacheStore",JSON.stringify(this.cacheStore))}getCountriesRequest(t){return this.httpClient.get(t).pipe(ee(e=>[]))}searchCapital(t){let e=`${this.apiUrl}/capital/${t}`;return this.getCountriesRequest(e).pipe(b(r=>this.cacheStore.byCapital={term:t,countries:r}),b(()=>this.saveCacheToLocalStorage()))}searchCountry(t){let e=`${this.apiUrl}/name/${t}`;return this.getCountriesRequest(e).pipe(b(r=>this.cacheStore.byCountries={term:t,countries:r}),b(()=>this.saveCacheToLocalStorage()))}searchRegion(t){let e=`${this.apiUrl}/region/${t}`;return this.getCountriesRequest(e).pipe(b(r=>this.cacheStore.byRegion={region:t,countries:r}),b(()=>this.saveCacheToLocalStorage()))}searchByCode(t){let e=`${this.apiUrl}/alpha?codes=${t}`;return this.getCountriesRequest(e)}static \u0275fac=function(e){return new(e||n)(ie(me))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var w=class n{placeholder="";onValue=new ae;debouncer=new Z;debouncerSubscription;ngOnInit(){this.debouncerSubscription=this.debouncer.pipe(te(700)).subscribe(t=>{this.onValue.emit(t)})}ngOnDestroy(){this.debouncerSubscription?.unsubscribe()}onKeyUp(t){this.debouncer.next(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["shared-search-box"]],inputs:{placeholder:"placeholder"},outputs:{onValue:"onValue"},decls:2,vars:1,consts:[["searchInput",""],["type","text",1,"form-control",3,"keyup","placeholder"]],template:function(e,r){if(e&1){let v=O();o(0,"input",1,0),h("keyup",function(){L(v);let Ce=$(1);return k(r.onKeyUp(Ce.value))}),i()}e&2&&l("placeholder",r.placeholder)},encapsulation:2})};var y=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["shared-loading-spinner"]],decls:15,vars:0,consts:[[1,"spinner-container","bg-dark"],["width","30","height","30","viewBox","0 0 45 45","xmlns","http://www.w3.org/2000/svg","stroke","#fff"],["fill","none","fill-rule","evenodd","transform","translate(1 1)","stroke-width","2"],["cx","22","cy","22","r","6","stroke-opacity","0"],["attributeName","r","begin","1.5s","dur","3s","values","6;22","calcMode","linear","repeatCount","indefinite"],["attributeName","stroke-opacity","begin","1.5s","dur","3s","values","1;0","calcMode","linear","repeatCount","indefinite"],["attributeName","stroke-width","begin","1.5s","dur","3s","values","2;0","calcMode","linear","repeatCount","indefinite"],["attributeName","r","begin","3s","dur","3s","values","6;22","calcMode","linear","repeatCount","indefinite"],["attributeName","stroke-opacity","begin","3s","dur","3s","values","1;0","calcMode","linear","repeatCount","indefinite"],["attributeName","stroke-width","begin","3s","dur","3s","values","2;0","calcMode","linear","repeatCount","indefinite"],["cx","22","cy","22","r","8"],["attributeName","r","begin","0s","dur","1.5s","values","6;1;2;3;4;5;6","calcMode","linear","repeatCount","indefinite"]],template:function(e,r){e&1&&(o(0,"div",0)(1,"span"),a(2,"Buscando"),i(),re(),o(3,"svg",1)(4,"g",2)(5,"circle",3),c(6,"animate",4)(7,"animate",5)(8,"animate",6),i(),o(9,"circle",3),c(10,"animate",7)(11,"animate",8)(12,"animate",9),i(),o(13,"circle",10),c(14,"animate",11),i()()()())},styles:[".spinner-container[_ngcontent-%COMP%]{align-items:center;background-color:#000;border-radius:20px;bottom:15px;box-shadow:0 3px 5px #0000004d;color:#fff;display:flex;gap:.5rem;padding:5px 10px;position:fixed;right:15px}span[_ngcontent-%COMP%]{margin-left:5px}"]})};function Se(n,t){n&1&&(o(0,"div",2),a(1,` No hay pa\xEDses que mostrar
`),i())}function xe(n,t){if(n&1&&(o(0,"tr")(1,"td"),a(2),i(),o(3,"td"),a(4),i(),o(5,"td"),c(6,"img",5),i(),o(7,"td"),a(8),i(),o(9,"td"),a(10),i(),o(11,"td"),a(12),U(13,"number"),i(),o(14,"td")(15,"a",6),a(16,"Info"),i()()()),n&2){let e=t.$implicit,r=t.$index;s(2),u(r+1),s(2),u(e.flag),s(2),R("alt",e.name.common+" flag"),l("src",e.flags.svg,V),s(2),u(e.name.common),s(2),u(e.capital),s(2),u(q(13,9,e.population)),s(3),j("routerLink","/countries/by/",e.cioc,"")}}function _e(n,t){if(n&1&&(o(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),a(4,"#"),i(),o(5,"th",4),a(6,"Icon"),i(),o(7,"th",4),a(8,"Bandera"),i(),o(9,"th",4),a(10,"Nombre"),i(),o(11,"th",4),a(12,"Capital"),i(),o(13,"th",4),a(14,"Poblaci\xF3n"),i(),c(15,"th",4),i()(),o(16,"tbody"),B(17,xe,17,11,"tr",null,P),i()()),n&2){let e=M();s(17),I(e.countries)}}var C=class n{countries=[];static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["countries-table"]],inputs:{countries:"countries"},decls:3,vars:2,consts:[["table",""],["class","alert alert-warning text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-warning","text-center"],[1,"table"],["scope","col"],["width","25px",3,"src","alt"],[3,"routerLink"]],template:function(e,r){if(e&1&&g(0,Se,2,0,"div",1)(1,_e,19,0,"ng-template",null,0,ce),e&2){let v=$(2);l("ngIf",r.countries.length===0)("ngIfElse",v)}},dependencies:[pe,de,A]})};function Ee(n,t){n&1&&c(0,"shared-loading-spinner")}var H=class n{constructor(t){this.countriesService=t;this.countries=this.countriesService.cacheStore.byCapital.countries,this.searchBoxPlaceholder=this.countriesService.cacheStore.byCapital.term||"Buscar por pa\xEDs"}countries=[];isLoading=!1;searchBoxPlaceholder;searchByCapital(t){return x(this,null,function*(){this.isLoading=!0,this.countries=yield _(this.countriesService.searchCapital(t)),this.isLoading=!1})}static \u0275fac=function(e){return new(e||n)(f(m))};static \u0275cmp=p({type:n,selectors:[["app-by-capital-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],[3,"onValue","placeholder"],[3,"countries"]],template:function(e,r){e&1&&(o(0,"h2"),a(1,"Por capital"),i(),c(2,"hr"),o(3,"div",0)(4,"div",1)(5,"shared-search-box",2),h("onValue",function(S){return r.searchByCapital(S)}),i(),c(6,"hr"),i()(),o(7,"div",0)(8,"div",1),g(9,Ee,1,0,"shared-loading-spinner"),c(10,"countries-table",3),i()()),e&2&&(s(5),R("placeholder",r.searchBoxPlaceholder),s(4),E(r.isLoading?9:-1),s(),l("countries",r.countries))},dependencies:[w,y,C]})};function Pe(n,t){n&1&&c(0,"shared-loading-spinner")}var z=class n{constructor(t){this.countriesService=t;this.countries=this.countriesService.cacheStore.byCountries.countries,this.searchBoxPlaceholder=this.countriesService.cacheStore.byCountries.term||"Buscar por pa\xEDs"}countries=[];isLoading=!1;searchBoxPlaceholder;searchByCountry(t){return x(this,null,function*(){this.isLoading=!0,this.countries=yield _(this.countriesService.searchCountry(t)),this.isLoading=!1})}static \u0275fac=function(e){return new(e||n)(f(m))};static \u0275cmp=p({type:n,selectors:[["app-by-country-page"]],decls:11,vars:3,consts:[[1,"row"],[1,"col"],[3,"onValue","placeholder"],[3,"countries"]],template:function(e,r){e&1&&(o(0,"h2"),a(1,"Por pa\xEDs"),i(),c(2,"hr"),o(3,"div",0)(4,"div",1)(5,"shared-search-box",2),h("onValue",function(S){return r.searchByCountry(S)}),i(),c(6,"hr"),i()(),o(7,"div",0)(8,"div",1),g(9,Pe,1,0,"shared-loading-spinner"),c(10,"countries-table",3),i()()),e&2&&(s(5),R("placeholder",r.searchBoxPlaceholder),s(4),E(r.isLoading?9:-1),s(),l("countries",r.countries))},dependencies:[w,y,C]})};function Be(n,t){if(n&1){let e=O();o(0,"button",5),h("click",function(){let v=L(e).$implicit,S=M();return k(S.searchByRegion(v))}),a(1),i()}if(n&2){let e=t.$implicit,r=M();se("btn-outline-primary",r.selectedRegion===e),s(),D(" ",e," ")}}function Ie(n,t){n&1&&c(0,"shared-loading-spinner")}var J=class n{constructor(t){this.countriesService=t;this.countries=this.countriesService.cacheStore.byRegion.countries,this.selectedRegion=this.countriesService.cacheStore.byRegion.region}countries=[];isLoading=!1;regions=["Africa","Americas","Asia","Europe","Oceania"];selectedRegion;searchByRegion(t){return x(this,null,function*(){this.selectedRegion=t,this.isLoading=!0,this.countries=yield _(this.countriesService.searchRegion(t)),this.isLoading=!1})}static \u0275fac=function(e){return new(e||n)(f(m))};static \u0275cmp=p({type:n,selectors:[["app-by-region-page"]],decls:12,vars:2,consts:[[1,"row"],[1,"col","d-flex","justify-content-center"],[1,"btn","mx-2",3,"btn-outline-primary"],[1,"col"],[3,"countries"],[1,"btn","mx-2",3,"click"]],template:function(e,r){e&1&&(o(0,"h2"),a(1,"Por regi\xF3n"),i(),c(2,"hr"),o(3,"div",0)(4,"div",1),B(5,Be,2,3,"button",2,P),i()(),o(7,"div",0)(8,"div",3),c(9,"hr"),g(10,Ie,1,0,"shared-loading-spinner"),c(11,"countries-table",4),i()()),e&2&&(s(5),I(r.regions),s(5),E(r.isLoading?10:-1),s(),l("countries",r.countries))},dependencies:[y,C]})};function Re(n,t){if(n&1&&(o(0,"span",8),a(1),i()),n&2){let e=t.$implicit;s(),u(e)}}var K=class n{country;constructor(t){this.country=t.snapshot.data.countryPageResolver[0]}get translations(){let t=new Set;return Object.values(this.country.translations).forEach(e=>{t.add(e.common)}),Array.from(t)}static \u0275fac=function(e){return new(e||n)(f(ue))};static \u0275cmp=p({type:n,selectors:[["app-country-page"]],decls:29,vars:8,consts:[[1,"row"],[1,"col-4"],[1,"img-thumbnail",3,"src","alt"],[1,"col"],[1,"list-group"],[1,"list-group-item"],[1,"row","mt-2"],[1,"d-flex","flex-wrap","gap-1"],[1,"badge","bg-primary"]],template:function(e,r){e&1&&(o(0,"h2"),a(1,"Pa\xEDs: "),o(2,"strong"),a(3),i()(),c(4,"hr"),o(5,"div",0)(6,"div",1)(7,"h4"),a(8,"Bandera"),i(),c(9,"img",2),i(),o(10,"div",3)(11,"h4"),a(12,"Informaci\xF3n"),i(),o(13,"ul",4)(14,"li",5)(15,"strong"),a(16,"Poblaci\xF3n: "),i(),a(17),U(18,"number"),i(),o(19,"li",5)(20,"strong"),a(21,"C\xF3digo: "),i(),a(22),i()()()(),o(23,"div",6)(24,"h4"),a(25,"Traducciones"),i(),o(26,"div",7),B(27,Re,2,1,"span",8,P),i()()),e&2&&(s(3),u(r.country.name.common),s(6),j("alt","",r.country.name.common," flag"),l("src",r.country.flags.svg,V),s(8),D(" ",q(18,6,r.country.population)," "),s(5),D(" ",r.country.cioc," "),s(5),I(r.translations))},dependencies:[A]})};var he=n=>{let t=n.params.id;return oe(m).searchByCode(t)};var we=[{path:"by-capital",component:H},{path:"by-country",component:z},{path:"by-region",component:J},{path:"by/:id",component:K,resolve:{countryPageResolver:he}},{path:"**",redirectTo:"by-capital"}],G=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=F({type:n});static \u0275inj=N({imports:[Q.forChild(we),Q]})};var ye=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=F({type:n});static \u0275inj=N({imports:[le,G,fe]})};export{ye as CountriesModule};
